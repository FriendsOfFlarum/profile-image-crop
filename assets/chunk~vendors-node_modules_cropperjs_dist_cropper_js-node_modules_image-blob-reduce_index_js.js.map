{"version":3,"file":"chunk~vendors-node_modules_cropperjs_dist_cropper_js-node_modules_image-blob-reduce_index_js.js","mappings":"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","sources":["webpack://@fof/profile-image-crop/./node_modules/cropperjs/dist/cropper.js","webpack://@fof/profile-image-crop/./node_modules/image-blob-reduce/index.js","webpack://@fof/profile-image-crop/./node_modules/image-blob-reduce/lib/image_traverse.js","webpack://@fof/profile-image-crop/./node_modules/image-blob-reduce/lib/jpeg_plugins.js","webpack://@fof/profile-image-crop/./node_modules/image-blob-reduce/lib/utils.js","webpack://@fof/profile-image-crop/./node_modules/pica/dist/pica.js"],"sourcesContent":["/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:17.411Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n}(this, (function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90\n\n      case 8:\n        rotate = -90;\n        break;\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY; // Resize when width changed or height changed\n\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"https://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        } // The third parameter is required for avoiding side-effect (#682)\n\n\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n})));\n","\n'use strict';\n\nvar utils = require('./lib/utils');\nvar pica  = require('pica');\n\nfunction ImageBlobReduce(options) {\n  if (!(this instanceof ImageBlobReduce)) return new ImageBlobReduce(options);\n\n  options = options || {};\n\n  this.pica = options.pica || pica({});\n  this.initialized = false;\n\n  this.utils = utils;\n}\n\n\nImageBlobReduce.prototype.use = function (plugin /*, params, ... */) {\n  var args = [ this ].concat(Array.prototype.slice.call(arguments, 1));\n  plugin.apply(plugin, args);\n  return this;\n};\n\n\nImageBlobReduce.prototype.init = function () {\n  this.use(require('./lib/jpeg_plugins').assign);\n};\n\n\nImageBlobReduce.prototype.toBlob = function (blob, options) {\n  var opts = utils.assign({ max: Infinity }, options);\n  var env = {\n    blob: blob,\n    opts: opts\n  };\n\n  if (!this.initialized) {\n    this.init();\n    this.initialized = true;\n  }\n\n  return Promise.resolve(env)\n    .then(this._blob_to_image)\n    .then(this._calculate_size)\n    .then(this._transform)\n    .then(this._cleanup)\n    .then(this._create_blob)\n    .then(function (_env) {\n      // Safari 12 workaround\n      // https://github.com/nodeca/pica/issues/199\n      _env.out_canvas.width = _env.out_canvas.height = 0;\n\n      return _env.out_blob;\n    });\n};\n\n\nImageBlobReduce.prototype.toCanvas = function (blob, options) {\n  var opts = utils.assign({ max: Infinity }, options);\n  var env = {\n    blob: blob,\n    opts: opts\n  };\n\n  if (!this.initialized) {\n    this.init();\n    this.initialized = true;\n  }\n\n  return Promise.resolve(env)\n    .then(this._blob_to_image)\n    .then(this._calculate_size)\n    .then(this._transform)\n    .then(this._cleanup)\n    .then(function (_env) { return _env.out_canvas; });\n};\n\n\nImageBlobReduce.prototype.before = function (method_name, fn) {\n  if (!this[method_name]) throw new Error('Method \"' + method_name + '\" does not exist');\n  if (typeof fn !== 'function') throw new Error('Invalid argument \"fn\", function expected');\n\n  var old_fn = this[method_name];\n  var self = this;\n\n  this[method_name] = function (env) {\n    return fn.call(self, env).then(function (_env) {\n      return old_fn.call(self, _env);\n    });\n  };\n\n  return this;\n};\n\n\nImageBlobReduce.prototype.after = function (method_name, fn) {\n  if (!this[method_name]) throw new Error('Method \"' + method_name + '\" does not exist');\n  if (typeof fn !== 'function') throw new Error('Invalid argument \"fn\", function expected');\n\n  var old_fn = this[method_name];\n  var self = this;\n\n  this[method_name] = function (env) {\n    return old_fn.call(self, env).then(function (_env) {\n      return fn.call(self, _env);\n    });\n  };\n\n  return this;\n};\n\n\nImageBlobReduce.prototype._blob_to_image = function (env) {\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n  env.image = document.createElement('img');\n  env.image_url = URL.createObjectURL(env.blob);\n  env.image.src = env.image_url;\n\n  return new Promise(function (resolve, reject) {\n    env.image.onerror = function () { reject(new Error('ImageBlobReduce: failed to create Image() from blob')); };\n    env.image.onload = function () { resolve(env); };\n  });\n};\n\n\nImageBlobReduce.prototype._calculate_size = function (env) {\n  //\n  // Note, if your need not \"symmetric\" resize logic, you MUST check\n  // `env.orientation` (set by plugins) and swap width/height appropriately.\n  //\n  var scale_factor = env.opts.max / Math.max(env.image.width, env.image.height);\n\n  if (scale_factor > 1) scale_factor = 1;\n\n  env.transform_width = Math.max(Math.round(env.image.width * scale_factor), 1);\n  env.transform_height = Math.max(Math.round(env.image.height * scale_factor), 1);\n\n  // Info for user plugins, to check if scaling applied\n  env.scale_factor = scale_factor;\n\n  return Promise.resolve(env);\n};\n\n\nImageBlobReduce.prototype._transform = function (env) {\n  env.out_canvas = this.pica.options.createCanvas(env.transform_width, env.transform_height);\n\n  // Dim env temporary vars to prohibit use and avoid confusion when orientation\n  // changed. You should take real size from canvas.\n  env.transform_width = null;\n  env.transform_height = null;\n\n  // By default use alpha for png only\n  var pica_opts = { alpha: env.blob.type === 'image/png' };\n\n  // Extract pica options if been passed\n  this.utils.assign(pica_opts, this.utils.pick_pica_resize_options(env.opts));\n\n  return this.pica\n    .resize(env.image, env.out_canvas, pica_opts)\n    .then(function () { return env; });\n};\n\n\nImageBlobReduce.prototype._cleanup = function (env) {\n  env.image.src = '';\n  env.image = null;\n\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n  if (URL.revokeObjectURL) URL.revokeObjectURL(env.image_url);\n\n  env.image_url = null;\n\n  return Promise.resolve(env);\n};\n\n\nImageBlobReduce.prototype._create_blob = function (env) {\n  return this.pica.toBlob(env.out_canvas, env.blob.type)\n    .then(function (blob) {\n      env.out_blob = blob;\n      return env;\n    });\n};\n\n\nImageBlobReduce.prototype._getUint8Array = function (blob) {\n  if (blob.arrayBuffer) {\n    return blob.arrayBuffer().then(function (buf) {\n      return new Uint8Array(buf);\n    });\n  }\n\n  return new Promise(function (resolve, reject) {\n    var fr = new FileReader();\n\n    fr.readAsArrayBuffer(blob);\n\n    fr.onload = function () { resolve(new Uint8Array(fr.result)); };\n    fr.onerror = function () {\n      reject(new Error('ImageBlobReduce: failed to load data from input blob'));\n      fr.abort();\n    };\n    fr.onabort = function () {\n      reject(new Error('ImageBlobReduce: failed to load data from input blob (aborted)'));\n    };\n  });\n};\n\n\nImageBlobReduce.pica = pica;\n\nmodule.exports = ImageBlobReduce;\n","\n'use strict';\n\n//////////////////////////////////////////////////////////////////////////\n// Helpers\n//\nfunction error(message, code) {\n  var err = new Error(message);\n  err.code = code;\n  return err;\n}\n\n\n// Convert number to 0xHH string\n//\nfunction to_hex(number) {\n  var n = number.toString(16).toUpperCase();\n  for (var i = 2 - n.length; i > 0; i--) n = '0' + n;\n  return '0x' + n;\n}\n\n\nfunction utf8_encode(str) {\n  try {\n    return unescape(encodeURIComponent(str));\n  } catch (_) {\n    return str;\n  }\n}\n\n\nfunction utf8_decode(str) {\n  try {\n    return decodeURIComponent(escape(str));\n  } catch (_) {\n    return str;\n  }\n}\n\n\n// Check if input is a Uint8Array\n//\nfunction is_uint8array(bin) {\n  return Object.prototype.toString.call(bin) === '[object Uint8Array]';\n}\n\n\n//////////////////////////////////////////////////////////////////////////\n// Exif parser\n//\n// Input:\n//  - jpeg_bin:   Uint8Array - jpeg file\n//  - exif_start: Number     - start of TIFF header (after Exif\\0\\0)\n//  - exif_end:   Number     - end of Exif segment\n//  - on_entry:   Number     - callback\n//\nfunction ExifParser(jpeg_bin, exif_start, exif_end) {\n  // Uint8Array, exif without signature (which isn't included in offsets)\n  this.input      = jpeg_bin.subarray(exif_start, exif_end);\n\n  // offset correction for `on_entry` callback\n  this.start      = exif_start;\n\n  // Check TIFF header (includes byte alignment and first IFD offset)\n  var sig = String.fromCharCode.apply(null, this.input.subarray(0, 4));\n\n  if (sig !== 'II\\x2A\\0' && sig !== 'MM\\0\\x2A') {\n    throw error('invalid TIFF signature', 'EBADDATA');\n  }\n\n  // true if motorola (big endian) byte alignment, false if intel\n  this.big_endian = sig[0] === 'M';\n}\n\n\nExifParser.prototype.each = function (on_entry) {\n  // allow premature exit\n  this.aborted = false;\n\n  var offset = this.read_uint32(4);\n\n  this.ifds_to_read = [ {\n    id:     0,\n    offset: offset\n  } ];\n\n  while (this.ifds_to_read.length > 0 && !this.aborted) {\n    var i = this.ifds_to_read.shift();\n    if (!i.offset) continue;\n    this.scan_ifd(i.id, i.offset, on_entry);\n  }\n};\n\n\nExifParser.prototype.filter = function (on_entry) {\n  var ifds = {};\n\n  // make sure IFD0 always exists\n  ifds.ifd0 = { id: 0, entries: [] };\n\n  this.each(function (entry) {\n    if (on_entry(entry) === false && !entry.is_subifd_link) return;\n    if (entry.is_subifd_link && entry.count !== 1 && entry.format !== 4) return; // filter out bogus links\n\n    if (!ifds['ifd' + entry.ifd]) {\n      ifds['ifd' + entry.ifd] = { id: entry.ifd, entries: [] };\n    }\n\n    ifds['ifd' + entry.ifd].entries.push(entry);\n  });\n\n  // thumbnails are not supported just yet, so delete all information related to it\n  delete ifds.ifd1;\n\n  // Calculate output size\n  var length = 8;\n  Object.keys(ifds).forEach(function (ifd_no) {\n    length += 2;\n\n    ifds[ifd_no].entries.forEach(function (entry) {\n      length += 12 + (entry.data_length > 4 ? Math.ceil(entry.data_length / 2) * 2 : 0);\n    });\n\n    length += 4;\n  });\n\n  this.output = new Uint8Array(length);\n  this.output[0] = this.output[1] = (this.big_endian ? 'M' : 'I').charCodeAt(0);\n  this.write_uint16(2, 0x2A);\n\n  var offset = 8;\n  var self = this;\n  this.write_uint32(4, offset);\n\n  Object.keys(ifds).forEach(function (ifd_no) {\n    ifds[ifd_no].written_offset = offset;\n\n    var ifd_start = offset;\n    var ifd_end   = ifd_start + 2 + ifds[ifd_no].entries.length * 12 + 4;\n    offset = ifd_end;\n\n    self.write_uint16(ifd_start, ifds[ifd_no].entries.length);\n\n    ifds[ifd_no].entries.sort(function (a, b) {\n      // IFD entries must be in order of increasing tag IDs\n      return a.tag - b.tag;\n    }).forEach(function (entry, idx) {\n      var entry_offset = ifd_start + 2 + idx * 12;\n\n      self.write_uint16(entry_offset, entry.tag);\n      self.write_uint16(entry_offset + 2, entry.format);\n      self.write_uint32(entry_offset + 4, entry.count);\n\n      if (entry.is_subifd_link) {\n        // filled in later\n        if (ifds['ifd' + entry.tag]) ifds['ifd' + entry.tag].link_offset = entry_offset + 8;\n      } else if (entry.data_length <= 4) {\n        self.output.set(\n          self.input.subarray(entry.data_offset - self.start, entry.data_offset - self.start + 4),\n          entry_offset + 8\n        );\n      } else {\n        self.write_uint32(entry_offset + 8, offset);\n        self.output.set(\n          self.input.subarray(entry.data_offset - self.start, entry.data_offset - self.start + entry.data_length),\n          offset\n        );\n        offset += Math.ceil(entry.data_length / 2) * 2;\n      }\n    });\n\n    var next_ifd = ifds['ifd' + (ifds[ifd_no].id + 1)];\n    if (next_ifd) next_ifd.link_offset = ifd_end - 4;\n  });\n\n  Object.keys(ifds).forEach(function (ifd_no) {\n    if (ifds[ifd_no].written_offset && ifds[ifd_no].link_offset) {\n      self.write_uint32(ifds[ifd_no].link_offset, ifds[ifd_no].written_offset);\n    }\n  });\n\n  if (this.output.length !== offset) throw error('internal error: incorrect buffer size allocated');\n\n  return this.output;\n};\n\n\nExifParser.prototype.read_uint16 = function (offset) {\n  var d = this.input;\n  if (offset + 2 > d.length) throw error('unexpected EOF', 'EBADDATA');\n\n  return this.big_endian ?\n    d[offset] * 0x100 + d[offset + 1] :\n    d[offset] + d[offset + 1] * 0x100;\n};\n\n\nExifParser.prototype.read_uint32 = function (offset) {\n  var d = this.input;\n  if (offset + 4 > d.length) throw error('unexpected EOF', 'EBADDATA');\n\n  return this.big_endian ?\n    d[offset] * 0x1000000 + d[offset + 1] * 0x10000 + d[offset + 2] * 0x100 + d[offset + 3] :\n    d[offset] + d[offset + 1] * 0x100 + d[offset + 2] * 0x10000 + d[offset + 3] * 0x1000000;\n};\n\n\nExifParser.prototype.write_uint16 = function (offset, value) {\n  var d = this.output;\n\n  if (this.big_endian) {\n    d[offset]     = (value >>> 8) & 0xFF;\n    d[offset + 1] = value & 0xFF;\n  } else {\n    d[offset]     = value & 0xFF;\n    d[offset + 1] = (value >>> 8) & 0xFF;\n  }\n};\n\n\nExifParser.prototype.write_uint32 = function (offset, value) {\n  var d = this.output;\n\n  if (this.big_endian) {\n    d[offset]     = (value >>> 24) & 0xFF;\n    d[offset + 1] = (value >>> 16) & 0xFF;\n    d[offset + 2] = (value >>> 8) & 0xFF;\n    d[offset + 3] = value & 0xFF;\n  } else {\n    d[offset]     = value & 0xFF;\n    d[offset + 1] = (value >>> 8) & 0xFF;\n    d[offset + 2] = (value >>> 16) & 0xFF;\n    d[offset + 3] = (value >>> 24) & 0xFF;\n  }\n};\n\n\nExifParser.prototype.is_subifd_link = function (ifd, tag) {\n  return (ifd === 0 && tag === 0x8769) || // SubIFD\n         (ifd === 0 && tag === 0x8825) || // GPS Info\n         (ifd === 0x8769 && tag === 0xA005); // Interop IFD\n};\n\n\n// Returns byte length of a single component of a given format\n//\nExifParser.prototype.exif_format_length = function (format) {\n  switch (format) {\n    case 1: // byte\n    case 2: // ascii\n    case 6: // sbyte\n    case 7: // undefined\n      return 1;\n\n    case 3: // short\n    case 8: // sshort\n      return 2;\n\n    case 4:  // long\n    case 9:  // slong\n    case 11: // float\n      return 4;\n\n    case 5:  // rational\n    case 10: // srational\n    case 12: // double\n      return 8;\n\n    default:\n      // unknown type\n      return 0;\n  }\n};\n\n\n// Reads Exif data\n//\nExifParser.prototype.exif_format_read = function (format, offset) {\n  var v;\n\n  switch (format) {\n    case 1: // byte\n    case 2: // ascii\n      v = this.input[offset];\n      return v;\n\n    case 6: // sbyte\n      v = this.input[offset];\n      return v | (v & 0x80) * 0x1fffffe;\n\n    case 3: // short\n      v = this.read_uint16(offset);\n      return v;\n\n    case 8: // sshort\n      v = this.read_uint16(offset);\n      return v | (v & 0x8000) * 0x1fffe;\n\n    case 4: // long\n      v = this.read_uint32(offset);\n      return v;\n\n    case 9: // slong\n      v = this.read_uint32(offset);\n      return v | 0;\n\n    case 5:  // rational\n    case 10: // srational\n    case 11: // float\n    case 12: // double\n      return null; // not implemented\n\n    case 7: // undefined\n      return null; // blob\n\n    default:\n      // unknown type\n      return null;\n  }\n};\n\n\nExifParser.prototype.scan_ifd = function (ifd_no, offset, on_entry) {\n  var entry_count = this.read_uint16(offset);\n\n  offset += 2;\n\n  for (var i = 0; i < entry_count; i++) {\n    var tag    = this.read_uint16(offset);\n    var format = this.read_uint16(offset + 2);\n    var count  = this.read_uint32(offset + 4);\n\n    var comp_length    = this.exif_format_length(format);\n    var data_length    = count * comp_length;\n    var data_offset    = data_length <= 4 ? offset + 8 : this.read_uint32(offset + 8);\n    var is_subifd_link = false;\n\n    if (data_offset + data_length > this.input.length) {\n      throw error('unexpected EOF', 'EBADDATA');\n    }\n\n    var value = [];\n    var comp_offset = data_offset;\n\n    for (var j = 0; j < count; j++, comp_offset += comp_length) {\n      var item = this.exif_format_read(format, comp_offset);\n      if (item === null) {\n        value = null;\n        break;\n      }\n      value.push(item);\n    }\n\n    if (Array.isArray(value) && format === 2) {\n      try {\n        value = utf8_decode(String.fromCharCode.apply(null, value));\n      } catch (_) {\n        value = null;\n      }\n\n      if (value && value[value.length - 1] === '\\0') value = value.slice(0, -1);\n    }\n\n    if (this.is_subifd_link(ifd_no, tag)) {\n      if (Array.isArray(value) && Number.isInteger(value[0]) && value[0] > 0) {\n        this.ifds_to_read.push({\n          id:     tag,\n          offset: value[0]\n        });\n        is_subifd_link = true;\n      }\n    }\n\n    var entry = {\n      is_big_endian:  this.big_endian,\n      ifd:            ifd_no,\n      tag:            tag,\n      format:         format,\n      count:          count,\n      entry_offset:   offset + this.start,\n      data_length:    data_length,\n      data_offset:    data_offset + this.start,\n      value:          value,\n      is_subifd_link: is_subifd_link\n    };\n\n    if (on_entry(entry) === false) {\n      this.aborted = true;\n      return;\n    }\n\n    offset += 12;\n  }\n\n  if (ifd_no === 0) {\n    this.ifds_to_read.push({\n      id:     1,\n      offset: this.read_uint32(offset)\n    });\n  }\n};\n\n\n// Check whether input is a JPEG image\n//\n// Input:\n//  - jpeg_bin: Uint8Array - jpeg file\n//\n// Returns true if it is and false otherwise\n//\nmodule.exports.is_jpeg = function (jpeg_bin) {\n  return jpeg_bin.length >= 4 && jpeg_bin[0] === 0xFF && jpeg_bin[1] === 0xD8 && jpeg_bin[2] === 0xFF;\n};\n\n\n// Call an iterator on each segment in the given JPEG image\n//\n// Input:\n//  - jpeg_bin:   Uint8Array - jpeg file\n//  - on_segment: Function - callback executed on each JPEG marker segment\n//    - segment:  Object\n//      - code:   Number - marker type (2nd byte, e.g. 0xE0 for APP0)\n//      - offset: Number - offset of the first byte (0xFF) relative to `jpeg_bin` start\n//      - length: Number - length of the entire marker segment including first two bytes and length\n//        - 2 for standalone markers\n//        - 4+length for markers with data\n//\n// Iteration stops when `EOI` (0xFFD9) marker is reached or if `on_segment`\n// function returns `false`.\n//\nmodule.exports.jpeg_segments_each = function (jpeg_bin, on_segment) {\n  if (!is_uint8array(jpeg_bin)) {\n    throw error('Invalid argument (jpeg_bin), Uint8Array expected', 'EINVAL');\n  }\n\n  if (typeof on_segment !== 'function') {\n    throw error('Invalid argument (on_segment), Function expected', 'EINVAL');\n  }\n\n  if (!module.exports.is_jpeg(jpeg_bin)) {\n    throw error('Unknown file format', 'ENOTJPEG');\n  }\n\n  var offset = 0, length = jpeg_bin.length, inside_scan = false;\n\n  for (;;) {\n    var segment_code, segment_length;\n\n    if (offset + 1 >= length) throw error('Unexpected EOF', 'EBADDATA');\n    var byte1 = jpeg_bin[offset];\n    var byte2 = jpeg_bin[offset + 1];\n\n    if (byte1 === 0xFF && byte2 === 0xFF) {\n      // padding\n      segment_code = 0xFF;\n      segment_length = 1;\n\n    } else if (byte1 === 0xFF && byte2 !== 0) {\n      // marker\n      segment_code = byte2;\n      segment_length = 2;\n\n      if ((0xD0 <= segment_code && segment_code <= 0xD9) || segment_code === 0x01) {\n        // standalone markers, according to JPEG 1992,\n        // http://www.w3.org/Graphics/JPEG/itu-t81.pdf, see Table B.1\n      } else {\n        if (offset + 3 >= length) throw error('Unexpected EOF', 'EBADDATA');\n        segment_length += jpeg_bin[offset + 2] * 0x100 + jpeg_bin[offset + 3];\n        if (segment_length < 2) throw error('Invalid segment length', 'EBADDATA');\n        if (offset + segment_length - 1 >= length) throw error('Unexpected EOF', 'EBADDATA');\n      }\n\n      if (inside_scan) {\n        if (segment_code >= 0xD0 && segment_code <= 0xD7) {\n          // reset markers\n        } else {\n          inside_scan = false;\n        }\n      }\n\n      if (segment_code === 0xDA /* SOS */) inside_scan = true;\n    } else if (inside_scan) {\n      // entropy-encoded segment\n      for (var pos = offset + 1; ; pos++) {\n        // scan until we find FF\n        if (pos >= length) throw error('Unexpected EOF', 'EBADDATA');\n        if (jpeg_bin[pos] === 0xFF) {\n          if (pos + 1 >= length) throw error('Unexpected EOF', 'EBADDATA');\n          if (jpeg_bin[pos + 1] !== 0) {\n            segment_code = 0;\n            segment_length = pos - offset;\n            break;\n          }\n        }\n      }\n    } else {\n      throw error('Unexpected byte at segment start: ' + to_hex(byte1) +\n        ' (offset ' + to_hex(offset) + ')', 'EBADDATA');\n    }\n\n    if (on_segment({ code: segment_code, offset: offset, length: segment_length }) === false) break;\n    if (segment_code === 0xD9 /* EOI */) break;\n    offset += segment_length;\n  }\n};\n\n\n// Replace or remove segments in the given JPEG image\n//\n// Input:\n//  - jpeg_bin:   Uint8Array - jpeg file\n//  - on_segment: Function - callback executed on each JPEG marker segment\n//    - segment:  Object\n//      - code:   Number - marker type (2nd byte, e.g. 0xE0 for APP0)\n//      - offset: Number - offset of the first byte (0xFF) relative to `jpeg_bin` start\n//      - length: Number - length of the entire marker segment including first two bytes and length\n//        - 2 for standalone markers\n//        - 4+length for markers with data\n//\n// `on_segment` function should return one of the following:\n//  - `false`        - segment is removed from the output\n//  - Uint8Array     - segment is replaced with the new data\n//  - [ Uint8Array ] - segment is replaced with the new data\n//  - anything else  - segment is copied to the output as is\n//\n// Any data after `EOI` (0xFFD9) marker is removed.\n//\nmodule.exports.jpeg_segments_filter = function (jpeg_bin, on_segment) {\n  if (!is_uint8array(jpeg_bin)) {\n    throw error('Invalid argument (jpeg_bin), Uint8Array expected', 'EINVAL');\n  }\n\n  if (typeof on_segment !== 'function') {\n    throw error('Invalid argument (on_segment), Function expected', 'EINVAL');\n  }\n\n  var ranges = [];\n  var out_length = 0;\n\n  module.exports.jpeg_segments_each(jpeg_bin, function (segment) {\n    var new_segment = on_segment(segment);\n\n    if (is_uint8array(new_segment)) {\n      ranges.push({ data: new_segment });\n      out_length += new_segment.length;\n    } else if (Array.isArray(new_segment)) {\n      new_segment.filter(is_uint8array).forEach(function (s) {\n        ranges.push({ data: s });\n        out_length += s.length;\n      });\n    } else if (new_segment !== false) {\n      var new_range = { start: segment.offset, end: segment.offset + segment.length };\n\n      if (ranges.length > 0 && ranges[ranges.length - 1].end === new_range.start) {\n        ranges[ranges.length - 1].end = new_range.end;\n      } else {\n        ranges.push(new_range);\n      }\n\n      out_length += segment.length;\n    }\n  });\n\n  var result = new Uint8Array(out_length);\n  var offset = 0;\n\n  ranges.forEach(function (range) {\n    var data = range.data || jpeg_bin.subarray(range.start, range.end);\n    result.set(data, offset);\n    offset += data.length;\n  });\n\n  return result;\n};\n\n\n// Call an iterator on each Exif entry in the given JPEG image\n//\n// Input:\n//  - jpeg_bin: Uint8Array - jpeg file\n//  - on_entry: Function - callback executed on each Exif entry\n//    - entry:  Object\n//      - is_big_endian:  Boolean - whether Exif uses big or little endian byte alignment\n//      - ifd:            Number  - IFD identifier (0 for IFD0, 1 for IFD1, 0x8769 for SubIFD,\n//                                 0x8825 for GPS Info, 0xA005 for Interop IFD)\n//      - tag:            Number  - exif entry tag (0x0110 - camera name, 0x0112 - orientation, etc. - see Exif spec)\n//      - format:         Number  - exif entry format (1 - byte, 2 - ascii, 3 - short, etc. - see Exif spec)\n//      - count:          Number  - number of components of the given format inside data\n//                                 (usually 1, or string length for ascii format)\n//      - entry_offset:   Number  - start of Exif entry (entry length is always 12, so not included)\n//      - data_offset:    Number  - start of data attached to Exif entry (will overlap with entry if length <= 4)\n//      - data_length:    Number  - length of data attached to Exif entry\n//      - value:          Array|String|Null - our best attempt at parsing data (not all formats supported right now)\n//      - is_subifd_link: Boolean - whether this entry is recognized to be a link to subifd (can't filter these out)\n//\n// Iteration stops early if iterator returns `false`.\n//\n// If Exif wasn't found anywhere (before start of the image data, SOS),\n// iterator is never executed.\n//\nmodule.exports.jpeg_exif_tags_each = function (jpeg_bin, on_exif_entry) {\n  if (!is_uint8array(jpeg_bin)) {\n    throw error('Invalid argument (jpeg_bin), Uint8Array expected', 'EINVAL');\n  }\n\n  if (typeof on_exif_entry !== 'function') {\n    throw error('Invalid argument (on_exif_entry), Function expected', 'EINVAL');\n  }\n\n  /* eslint-disable consistent-return */\n  module.exports.jpeg_segments_each(jpeg_bin, function (segment) {\n    if (segment.code === 0xDA /* SOS */) return false;\n\n    // look for APP1 segment and compare header with 'Exif\\0\\0'\n    if (segment.code === 0xE1 && segment.length >= 10 &&\n        jpeg_bin[segment.offset + 4] === 0x45 && jpeg_bin[segment.offset + 5] === 0x78 &&\n        jpeg_bin[segment.offset + 6] === 0x69 && jpeg_bin[segment.offset + 7] === 0x66 &&\n        jpeg_bin[segment.offset + 8] === 0x00 && jpeg_bin[segment.offset + 9] === 0x00) {\n\n      new ExifParser(jpeg_bin, segment.offset + 10, segment.offset + segment.length).each(on_exif_entry);\n      return false;\n    }\n  });\n};\n\n\n// Remove Exif entries in the given JPEG image\n//\n// Input:\n//  - jpeg_bin: Uint8Array - jpeg file\n//  - on_entry: Function - callback executed on each Exif entry\n//    - entry:  Object\n//      - is_big_endian:  Boolean - whether Exif uses big or little endian byte alignment\n//      - ifd:            Number  - IFD identifier (0 for IFD0, 1 for IFD1, 0x8769 for SubIFD,\n//                                  0x8825 for GPS Info, 0xA005 for Interop IFD)\n//      - tag:            Number  - exif entry tag (0x0110 - camera name, 0x0112 - orientation, etc. - see Exif spec)\n//      - format:         Number  - exif entry format (1 - byte, 2 - ascii, 3 - short, etc. - see Exif spec)\n//      - count:          Number  - number of components of the given format inside data\n//                                  (usually 1, or string length for ascii format)\n//      - entry_offset:   Number  - start of Exif entry (entry length is always 12, so not included)\n//      - data_offset:    Number  - start of data attached to Exif entry (will overlap with entry if length <= 4)\n//      - data_length:    Number  - length of data attached to Exif entry\n//      - value:          Array|String|Null - our best attempt at parsing data (not all formats supported right now)\n//      - is_subifd_link: Boolean - whether this entry is recognized to be a link to subifd (can't filter these out)\n//\n// This function removes following from Exif:\n//  - all entries where iterator returned false (except subifd links which are mandatory)\n//  - IFD1 and thumbnail image (the purpose of this function is to reduce file size,\n//    so thumbnail is usually the first thing to go)\n//  - all other data that isn't in IFD0, SubIFD, GPSIFD, InteropIFD\n//    (theoretically possible proprietary extensions, I haven't seen any of these yet)\n//\n// Changing data inside Exif entries is NOT supported yet (modifying `entry` object inside callback may break stuff).\n//\n// If Exif wasn't found anywhere (before start of the image data, SOS),\n// iterator is never executed, and original JPEG is returned as is.\n//\nmodule.exports.jpeg_exif_tags_filter = function (jpeg_bin, on_exif_entry) {\n  if (!is_uint8array(jpeg_bin)) {\n    throw error('Invalid argument (jpeg_bin), Uint8Array expected', 'EINVAL');\n  }\n\n  if (typeof on_exif_entry !== 'function') {\n    throw error('Invalid argument (on_exif_entry), Function expected', 'EINVAL');\n  }\n\n  var stop_search = false;\n\n  return module.exports.jpeg_segments_filter(jpeg_bin, function (segment) {\n    if (stop_search) return;\n    if (segment.code === 0xDA /* SOS */) stop_search = true;\n\n    // look for APP1 segment and compare header with 'Exif\\0\\0'\n    if (segment.code === 0xE1 && segment.length >= 10 &&\n        jpeg_bin[segment.offset + 4] === 0x45 && jpeg_bin[segment.offset + 5] === 0x78 &&\n        jpeg_bin[segment.offset + 6] === 0x69 && jpeg_bin[segment.offset + 7] === 0x66 &&\n        jpeg_bin[segment.offset + 8] === 0x00 && jpeg_bin[segment.offset + 9] === 0x00) {\n\n      var new_exif = new ExifParser(jpeg_bin, segment.offset + 10, segment.offset + segment.length)\n        .filter(on_exif_entry);\n      if (!new_exif) return false;\n\n      var header = new Uint8Array(10);\n\n      header.set(jpeg_bin.slice(segment.offset, segment.offset + 10));\n      header[2] = ((new_exif.length + 8) >>> 8) & 0xFF;\n      header[3] = (new_exif.length + 8) & 0xFF;\n\n      stop_search = true;\n      return [ header, new_exif ];\n    }\n  });\n};\n\n\n// Inserts a custom comment marker segment into JPEG file.\n//\n// Input:\n//  - jpeg_bin: Uint8Array - jpeg file\n//  - comment:  String\n//\n// Comment is inserted after first two bytes (FFD8, SOI).\n//\n// If JFIF (APP0) marker exists immediately after SOI (as mandated by the JFIF\n// spec), we insert comment after it instead.\n//\nmodule.exports.jpeg_add_comment = function (jpeg_bin, comment) {\n  var comment_inserted = false, segment_count = 0;\n\n  return module.exports.jpeg_segments_filter(jpeg_bin, function (segment) {\n    segment_count++;\n    if (segment_count === 1 && segment.code === 0xD8 /* SOI  */) return;\n    if (segment_count === 2 && segment.code === 0xE0 /* APP0 */) return;\n\n    if (comment_inserted) return;\n    comment = utf8_encode(comment);\n\n    // comment segment\n    var csegment = new Uint8Array(5 + comment.length);\n    var offset = 0;\n\n    csegment[offset++] = 0xFF;\n    csegment[offset++] = 0xFE;\n    csegment[offset++] = ((comment.length + 3) >>> 8) & 0xFF;\n    csegment[offset++] = (comment.length + 3) & 0xFF;\n\n    comment.split('').forEach(function (c) {\n      csegment[offset++] = c.charCodeAt(0) & 0xFF;\n    });\n\n    csegment[offset++] = 0;\n    comment_inserted = true;\n\n    return [ csegment, jpeg_bin.subarray(segment.offset, segment.offset + segment.length) ];\n  });\n};\n","\n'use strict';\n\n\nvar image_traverse = require('./image_traverse');\n\n\nfunction jpeg_patch_exif(env) {\n  return this._getUint8Array(env.blob).then(function (data) {\n    env.is_jpeg = image_traverse.is_jpeg(data);\n\n    if (!env.is_jpeg) return Promise.resolve(env);\n\n    env.orig_blob = env.blob;\n\n    try {\n      var exif_is_big_endian, orientation_offset;\n\n      /* eslint-disable consistent-return */\n      image_traverse.jpeg_exif_tags_each(data, function (entry) {\n        if (entry.ifd === 0 && entry.tag === 0x112 && Array.isArray(entry.value)) {\n          env.orientation    = entry.value[0] || 1;\n          exif_is_big_endian = entry.is_big_endian;\n          orientation_offset = entry.data_offset;\n          return false;\n        }\n      });\n\n      if (orientation_offset) {\n        var orientation_patch = exif_is_big_endian ?\n          new Uint8Array([ 0, 1 ]) :\n          new Uint8Array([ 1, 0 ]);\n\n        env.blob = new Blob([\n          data.slice(0, orientation_offset),\n          orientation_patch,\n          data.slice(orientation_offset + 2)\n        ], { type: 'image/jpeg' });\n      }\n    } catch (_) {}\n\n    return env;\n  });\n}\n\n\nfunction jpeg_rotate_canvas(env) {\n  if (!env.is_jpeg) return Promise.resolve(env);\n\n  var orientation = env.orientation - 1;\n  if (!orientation) return Promise.resolve(env);\n\n  var canvas;\n\n  if (orientation & 4) {\n    canvas = this.pica.options.createCanvas(env.out_canvas.height, env.out_canvas.width);\n  } else {\n    canvas = this.pica.options.createCanvas(env.out_canvas.width, env.out_canvas.height);\n  }\n\n  var ctx = canvas.getContext('2d');\n\n  ctx.save();\n\n  if (orientation & 1) ctx.transform(-1, 0, 0, 1, canvas.width, 0);\n  if (orientation & 2) ctx.transform(-1, 0, 0, -1, canvas.width, canvas.height);\n  if (orientation & 4) ctx.transform(0, 1, 1, 0, 0, 0);\n\n  ctx.drawImage(env.out_canvas, 0, 0);\n  ctx.restore();\n\n  // Safari 12 workaround\n  // https://github.com/nodeca/pica/issues/199\n  env.out_canvas.width = env.out_canvas.height = 0;\n\n  env.out_canvas = canvas;\n\n  return Promise.resolve(env);\n}\n\n\nfunction jpeg_attach_orig_segments(env) {\n  if (!env.is_jpeg) return Promise.resolve(env);\n\n  return Promise.all([\n    this._getUint8Array(env.blob),\n    this._getUint8Array(env.out_blob)\n  ]).then(function (res) {\n    var data = res[0];\n    var data_out = res[1];\n\n    if (!image_traverse.is_jpeg(data)) return Promise.resolve(env);\n\n    var segments = [];\n\n    image_traverse.jpeg_segments_each(data, function (segment) {\n      if (segment.code === 0xDA /* SOS */) return false;\n      segments.push(segment);\n    });\n\n    segments = segments\n      .filter(function (segment) {\n        // Drop ICC_PROFILE\n        //\n        if (segment.code === 0xE2) return false;\n\n        // Keep all APPn segments excluding APP2 (ICC_PROFILE),\n        // remove others because most of them depend on image data (DCT and such).\n        //\n        // APP0 - JFIF, APP1 - Exif, the rest are photoshop metadata and such\n        //\n        // See full list at https://www.w3.org/Graphics/JPEG/itu-t81.pdf (table B.1 on page 32)\n        //\n        if (segment.code >= 0xE0 && segment.code < 0xF0) return true;\n\n        // Keep comments\n        //\n        if (segment.code === 0xFE) return true;\n\n        return false;\n      })\n      .map(function (segment) {\n        return data.slice(segment.offset, segment.offset + segment.length);\n      });\n\n    env.out_blob = new Blob(\n      // intentionally omitting expected JFIF segment (offset 2 to 20)\n      [ data_out.slice(0, 2) ].concat(segments).concat([ data_out.slice(20) ]),\n      { type: 'image/jpeg' }\n    );\n\n    return env;\n  });\n}\n\n\nfunction assign(reducer) {\n  reducer.before('_blob_to_image', jpeg_patch_exif);\n  reducer.after('_transform',      jpeg_rotate_canvas);\n  reducer.after('_create_blob',    jpeg_attach_orig_segments);\n}\n\n\nmodule.exports.jpeg_patch_exif = jpeg_patch_exif;\nmodule.exports.jpeg_rotate_canvas = jpeg_rotate_canvas;\nmodule.exports.jpeg_attach_orig_segments = jpeg_attach_orig_segments;\nmodule.exports.assign = assign;\n","'use strict';\n\n\nmodule.exports.assign = function assign(to) {\n  var from;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (Object.prototype.hasOwnProperty.call(from, key)) to[key] = from[key];\n    }\n  }\n\n  return to;\n};\n\n\nfunction pick(from, props) {\n  var to = {};\n\n  props.forEach(function (key) {\n    if (Object.prototype.hasOwnProperty.call(from, key)) to[key] = from[key];\n  });\n\n  return to;\n}\n\n\nfunction pick_pica_resize_options(from) {\n  return pick(from, [\n    'alpha',\n    'unsharpAmount',\n    'unsharpRadius',\n    'unsharpThreshold',\n    'cancelToken'\n  ]);\n}\n\n\nmodule.exports.pick = pick;\nmodule.exports.pick_pica_resize_options = pick_pica_resize_options;\n","/*!\n\npica\nhttps://github.com/nodeca/pica\n\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pica = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){\n// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\nvar Multimath = _dereq_('multimath');\n\nvar mm_unsharp_mask = _dereq_('./mm_unsharp_mask');\n\nvar mm_resize = _dereq_('./mm_resize');\n\nfunction MathLib(requested_features) {\n  var __requested_features = requested_features || [];\n\n  var features = {\n    js: __requested_features.indexOf('js') >= 0,\n    wasm: __requested_features.indexOf('wasm') >= 0\n  };\n  Multimath.call(this, features);\n  this.features = {\n    js: features.js,\n    wasm: features.wasm && this.has_wasm()\n  };\n  this.use(mm_unsharp_mask);\n  this.use(mm_resize);\n}\n\nMathLib.prototype = Object.create(Multimath.prototype);\nMathLib.prototype.constructor = MathLib;\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  var result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp_mask(result, options.toWidth, options.toHeight, options.unsharpAmount, options.unsharpRadius, options.unsharpThreshold);\n  }\n\n  return result;\n};\n\nmodule.exports = MathLib;\n\n},{\"./mm_resize\":4,\"./mm_unsharp_mask\":9,\"multimath\":19}],2:[function(_dereq_,module,exports){\n// Resize convolvers, pure JS implementation\n//\n'use strict'; // Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\nfunction clampTo8(i) {\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampNegative(i) {\n  return i >= 0 ? i : 0;\n} // Convolve image data in horizontal direction. Can be used for:\n//\n// 1. bitmap with premultiplied alpha\n// 2. bitmap without alpha (all values 255)\n//\n// Notes:\n//\n// - output is transposed\n// - output resolution is ~15 bits per channel(for better precision).\n//\n\n\nfunction convolveHor(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHor()`\n//\n\n\nfunction convolveVert(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Sync with premultiplied version for exact result match\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Bring this value back in range + round result.\n      //\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14);\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Premultiply & convolve image data in horizontal direction. Can be used for:\n//\n// - Any bitmap data, extracted with `.getImageData()` method (with\n//   non-premultiplied alpha)\n//\n// For images without alpha channel this method is slower than `convolveHor()`\n//\n\n\nfunction convolveHorWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a, alpha;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        alpha = src[srcPtr + 3];\n        a = a + filterVal * alpha | 0;\n        b = b + filterVal * src[srcPtr + 2] * alpha | 0;\n        g = g + filterVal * src[srcPtr + 1] * alpha | 0;\n        r = r + filterVal * src[srcPtr] * alpha | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Premultiply is (* alpha / 255).\n      // Postpone division for better performance\n\n\n      b = b / 255 | 0;\n      g = g / 255 | 0;\n      r = r / 255 | 0; // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHorWithPre()`\n//\n\n\nfunction convolveVertWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Downscale to leave room for un-premultiply\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Un-premultiply\n\n      a = clampTo8(a + (1 << 13) >> 14);\n\n      if (a > 0) {\n        r = r * 255 / a | 0;\n        g = g * 255 / a | 0;\n        b = b * 255 / a | 0;\n      } // Bring this value back in range + round result.\n      // Shift value = FIXED_FRAC_BITS + 7\n      //\n\n\n      dest[destOffset + 3] = a;\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n}\n\nmodule.exports = {\n  convolveHor: convolveHor,\n  convolveVert: convolveVert,\n  convolveHorWithPre: convolveHorWithPre,\n  convolveVertWithPre: convolveVertWithPre\n};\n\n},{}],3:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = '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';\n\n},{}],4:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'resize',\n  fn: _dereq_('./resize'),\n  wasm_fn: _dereq_('./resize_wasm'),\n  wasm_src: _dereq_('./convolve_wasm_base64')\n};\n\n},{\"./convolve_wasm_base64\":3,\"./resize\":5,\"./resize_wasm\":8}],5:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nvar _require = _dereq_('./convolve'),\n    convolveHor = _require.convolveHor,\n    convolveVert = _require.convolveVert,\n    convolveHorWithPre = _require.convolveHorWithPre,\n    convolveVertWithPre = _require.convolveVertWithPre;\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nmodule.exports = function resize(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0;\n  var offsetY = options.offsetY || 0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY);\n  var tmp = new Uint16Array(destW * srcH * 4); // Autodetect if alpha channel exists, and use appropriate method\n\n  if (hasAlpha(src, srcW, srcH)) {\n    convolveHorWithPre(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVertWithPre(tmp, dest, srcH, destW, destH, filtersY);\n  } else {\n    convolveHor(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVert(tmp, dest, srcH, destW, destH, filtersY);\n    resetAlpha(dest, destW, destH);\n  }\n\n  return dest;\n};\n\n},{\"./convolve\":2,\"./resize_filter_gen\":6}],6:[function(_dereq_,module,exports){\n// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\nvar FILTER_INFO = _dereq_('./resize_filter_info'); // Precision of fixed FP values\n\n\nvar FIXED_FRAC_BITS = 14;\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\nmodule.exports = function resizeFilterGen(filter, srcSize, destSize, scale, offset) {\n  var filterFunction = FILTER_INFO.filter[filter].fn;\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped = Math.min(1.0, scale); // For upscale\n  // Filter window (averaging interval), scaled to src image\n\n  var srcWindow = FILTER_INFO.filter[filter].win / scaleClamped;\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize, floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n  var slowCopy = !packedFilter.subarray || !packedFilter.set; // For each destination pixel calculate source range and built filter values\n\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n    total = 0.0; // Fill filter values for calculated range\n\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction((pxl + 0.5 - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    } // Normalize filter, convert to fixed point and accumulate conversion error\n\n\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    } // Compensate normalization error, to minimize brightness drift\n\n\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal); //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n\n  return packedFilter;\n};\n\n},{\"./resize_filter_info\":7}],7:[function(_dereq_,module,exports){\n// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\nvar filter = {\n  // Nearest neibor\n  box: {\n    win: 0.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n      return x < 0.5 ? 1.0 : 0.0;\n    }\n  },\n  // // Hamming\n  hamming: {\n    win: 1.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 1.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * (0.54 + 0.46 * Math.cos(xpi / 1.0));\n    }\n  },\n  // Lanczos, win = 2\n  lanczos2: {\n    win: 2.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 2.0) / (xpi / 2.0);\n    }\n  },\n  // Lanczos, win = 3\n  lanczos3: {\n    win: 3.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 3.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 3.0) / (xpi / 3.0);\n    }\n  },\n  // Magic Kernel Sharp 2013, win = 2.5\n  // http://johncostella.com/magic/\n  mks2013: {\n    win: 2.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.5) {\n        return 0.0;\n      }\n\n      if (x >= 1.5) {\n        return -0.125 * (x - 2.5) * (x - 2.5);\n      }\n\n      if (x >= 0.5) {\n        return 0.25 * (4 * x * x - 11 * x + 7);\n      }\n\n      return 1.0625 - 1.75 * x * x;\n    }\n  }\n};\nmodule.exports = {\n  filter: filter,\n  // Legacy mapping\n  f2q: {\n    box: 0,\n    hamming: 1,\n    lanczos2: 2,\n    lanczos3: 3\n  },\n  q2f: ['box', 'hamming', 'lanczos2', 'lanczos3']\n};\n\n},{}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\nvar IS_LE = true; // should not crash everything on module load in old browsers\n\ntry {\n  IS_LE = new Uint32Array(new Uint8Array([1, 0, 0, 0]).buffer)[0] === 1;\n} catch (__) {}\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (var ptr = target_offset, i = 0; i < src.length; i++) {\n    var data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = data >> 8 & 0xFF;\n  }\n}\n\nmodule.exports = function resize_wasm(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0.0;\n  var offsetY = options.offsetY || 0.0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY); // destination is 0 too.\n\n  var src_offset = 0;\n  var src_size = Math.max(src.byteLength, dest.byteLength); // buffer between convolve passes\n\n  var tmp_offset = this.__align(src_offset + src_size);\n\n  var tmp_size = srcH * destW * 4 * 2; // 2 bytes per channel\n\n  var filtersX_offset = this.__align(tmp_offset + tmp_size);\n\n  var filtersY_offset = this.__align(filtersX_offset + filtersX.byteLength);\n\n  var alloc_bytes = filtersY_offset + filtersY.byteLength;\n\n  var instance = this.__instance('resize', alloc_bytes); //\n  // Fill memory block with data to process\n  //\n\n\n  var mem = new Uint8Array(this.__memory.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer); // 32-bit copy is much faster in chrome\n\n  var src32 = new Uint32Array(src.buffer);\n  mem32.set(src32); // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset); // Now call webassembly method\n  // emsdk does method names with '_'\n\n  var fn = instance.exports.convolveHV || instance.exports._convolveHV;\n\n  if (hasAlpha(src, srcW, srcH)) {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 1);\n  } else {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 0);\n    resetAlpha(dest, destW, destH);\n  } //\n  // Copy data back to typed array\n  //\n  // 32-bit copy is much faster in chrome\n\n\n  var dest32 = new Uint32Array(dest.buffer);\n  dest32.set(new Uint32Array(this.__memory.buffer, 0, destH * destW));\n  return dest;\n};\n\n},{\"./resize_filter_gen\":6}],9:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'unsharp_mask',\n  fn: _dereq_('./unsharp_mask'),\n  wasm_fn: _dereq_('./unsharp_mask_wasm'),\n  wasm_src: _dereq_('./unsharp_mask_wasm_base64')\n};\n\n},{\"./unsharp_mask\":10,\"./unsharp_mask_wasm\":11,\"./unsharp_mask_wasm_base64\":12}],10:[function(_dereq_,module,exports){\n// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSV, unsharp mask is applied to the\n// brightness channel and then image is converted back to RGB.\n//\n'use strict';\n\nvar glur_mono16 = _dereq_('glur/mono16');\n\nfunction hsv_v16(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, max;\n\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = r >= g && r >= b ? r : g >= b && g >= r ? g : b;\n    out[i] = max << 8;\n  }\n\n  return out;\n}\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var v1, v2, vmul;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var brightness = hsv_v16(img, width, height);\n  var blured = new Uint16Array(brightness); // copy, because blur modify src\n\n  glur_mono16(blured, width, height, radius);\n  var amountFp = amount / 100 * 0x1000 + 0.5 | 0;\n  var thresholdFp = threshold << 8;\n  var size = width * height;\n  /* eslint-disable indent */\n\n  for (var i = 0; i < size; i++) {\n    v1 = brightness[i];\n    diff = v1 - blured[i];\n\n    if (Math.abs(diff) >= thresholdFp) {\n      // add unsharp mask to the brightness channel\n      v2 = v1 + (amountFp * diff + 0x800 >> 12); // Both v1 and v2 are within [0.0 .. 255.0] (0000-FF00) range, never going into\n      // [255.003 .. 255.996] (FF01-FFFF). This allows to round this value as (x+.5)|0\n      // later without overflowing.\n\n      v2 = v2 > 0xff00 ? 0xff00 : v2;\n      v2 = v2 < 0x0000 ? 0x0000 : v2; // Avoid division by 0. V=0 means rgb(0,0,0), unsharp with unsharpAmount>0 cannot\n      // change this value (because diff between colors gets inflated), so no need to verify correctness.\n\n      v1 = v1 !== 0 ? v1 : 1; // Multiplying V in HSV model by a constant is equivalent to multiplying each component\n      // in RGB by the same constant (same for HSL), see also:\n      // https://beesbuzz.biz/code/16-hsv-color-transforms\n\n      vmul = (v2 << 12) / v1 | 0; // Result will be in [0..255] range because:\n      //  - all numbers are positive\n      //  - r,g,b <= (v1/256)\n      //  - r,g,b,(v1/256),(v2/256) <= 255\n      // So highest this number can get is X*255/X+0.5=255.5 which is < 256 and rounds down.\n\n      iTimes4 = i * 4;\n      img[iTimes4] = img[iTimes4] * vmul + 0x800 >> 12; // R\n\n      img[iTimes4 + 1] = img[iTimes4 + 1] * vmul + 0x800 >> 12; // G\n\n      img[iTimes4 + 2] = img[iTimes4 + 2] * vmul + 0x800 >> 12; // B\n    }\n  }\n};\n\n},{\"glur/mono16\":18}],11:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var pixels = width * height;\n  var img_bytes_cnt = pixels * 4;\n  var hsv_bytes_cnt = pixels * 2;\n  var blur_bytes_cnt = pixels * 2;\n  var blur_line_byte_cnt = Math.max(width, height) * 4; // float32 array\n\n  var blur_coeffs_byte_cnt = 8 * 4; // float32 array\n\n  var img_offset = 0;\n  var hsv_offset = img_bytes_cnt;\n  var blur_offset = hsv_offset + hsv_bytes_cnt;\n  var blur_tmp_offset = blur_offset + blur_bytes_cnt;\n  var blur_line_offset = blur_tmp_offset + blur_bytes_cnt;\n  var blur_coeffs_offset = blur_line_offset + blur_line_byte_cnt;\n\n  var instance = this.__instance('unsharp_mask', img_bytes_cnt + hsv_bytes_cnt + blur_bytes_cnt * 2 + blur_line_byte_cnt + blur_coeffs_byte_cnt, {\n    exp: Math.exp\n  }); // 32-bit copy is much faster in chrome\n\n\n  var img32 = new Uint32Array(img.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer);\n  mem32.set(img32); // HSL\n\n  var fn = instance.exports.hsv_v16 || instance.exports._hsv_v16;\n  fn(img_offset, hsv_offset, width, height); // BLUR\n\n  fn = instance.exports.blurMono16 || instance.exports._blurMono16;\n  fn(hsv_offset, blur_offset, blur_tmp_offset, blur_line_offset, blur_coeffs_offset, width, height, radius); // UNSHARP\n\n  fn = instance.exports.unsharp || instance.exports._unsharp;\n  fn(img_offset, img_offset, hsv_offset, blur_offset, width, height, amount, threshold); // 32-bit copy is much faster in chrome\n\n  img32.set(new Uint32Array(this.__memory.buffer, 0, pixels));\n};\n\n},{}],12:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = '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';\n\n},{}],13:[function(_dereq_,module,exports){\n'use strict';\n\nvar GC_INTERVAL = 100;\n\nfunction Pool(create, idle) {\n  this.create = create;\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\nPool.prototype.acquire = function () {\n  var _this = this;\n\n  var resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n\n    resource.release = function () {\n      return _this.release(resource);\n    };\n  }\n\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\nPool.prototype.release = function (resource) {\n  var _this2 = this;\n\n  delete this.acquired[resource.id];\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this2.gc();\n    }, GC_INTERVAL);\n  }\n};\n\nPool.prototype.gc = function () {\n  var _this3 = this;\n\n  var now = Date.now();\n  this.available = this.available.filter(function (resource) {\n    if (now - resource.lastUsed > _this3.idle) {\n      resource.destroy();\n      return false;\n    }\n\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this3.gc();\n    }, GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\nmodule.exports = Pool;\n\n},{}],14:[function(_dereq_,module,exports){\n// Add intermediate resizing steps when scaling down by a very large factor.\n//\n// For example, when resizing 10000x10000 down to 10x10, it'll resize it to\n// 300x300 first.\n//\n// It's needed because tiler has issues when the entire tile is scaled down\n// to a few pixels (1024px source tile with border size 3 should result in\n// at least 3+3+2 = 8px target tile, so max scale factor is 128 here).\n//\n// Also, adding intermediate steps can speed up processing if we use lower\n// quality algorithms for first stages.\n//\n'use strict'; // min size = 0 results in infinite loop,\n// min size = 1 can consume large amount of memory\n\nvar MIN_INNER_TILE_SIZE = 2;\n\nmodule.exports = function createStages(fromWidth, fromHeight, toWidth, toHeight, srcTileSize, destTileBorder) {\n  var scaleX = toWidth / fromWidth;\n  var scaleY = toHeight / fromHeight; // derived from createRegions equation:\n  // innerTileWidth = pixelFloor(srcTileSize * scaleX) - 2 * destTileBorder;\n\n  var minScale = (2 * destTileBorder + MIN_INNER_TILE_SIZE + 1) / srcTileSize; // refuse to scale image multiple times by less than twice each time,\n  // it could only happen because of invalid options\n\n  if (minScale > 0.5) return [[toWidth, toHeight]];\n  var stageCount = Math.ceil(Math.log(Math.min(scaleX, scaleY)) / Math.log(minScale)); // no additional resizes are necessary,\n  // stageCount can be zero or be negative when enlarging the image\n\n  if (stageCount <= 1) return [[toWidth, toHeight]];\n  var result = [];\n\n  for (var i = 0; i < stageCount; i++) {\n    var width = Math.round(Math.pow(Math.pow(fromWidth, stageCount - i - 1) * Math.pow(toWidth, i + 1), 1 / stageCount));\n    var height = Math.round(Math.pow(Math.pow(fromHeight, stageCount - i - 1) * Math.pow(toHeight, i + 1), 1 / stageCount));\n    result.push([width, height]);\n  }\n\n  return result;\n};\n\n},{}],15:[function(_dereq_,module,exports){\n// Split original image into multiple 1024x1024 chunks to reduce memory usage\n// (images have to be unpacked into typed arrays for resizing) and allow\n// parallel processing of multiple tiles at a time.\n//\n'use strict';\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.ceil(x);\n}\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder; // prevent infinite loop, this should never happen\n\n  if (innerTileWidth < 1 || innerTileHeight < 1) {\n    throw new Error('Internal error in pica: target tile width/height is too small.');\n  }\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile; // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n\n      if (x < 0) {\n        x = 0;\n      }\n\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n\n      if (y < 0) {\n        y = 0;\n      }\n\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n},{}],16:[function(_dereq_,module,exports){\n'use strict';\n\nfunction objClass(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  var cname = objClass(element);\n  return cname === '[object HTMLCanvasElement]'\n  /* browser */\n  || cname === '[object OffscreenCanvas]' || cname === '[object Canvas]'\n  /* node-canvas */\n  ;\n};\n\nmodule.exports.isImage = function isImage(element) {\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\nmodule.exports.isImageBitmap = function isImageBitmap(element) {\n  return objClass(element) === '[object ImageBitmap]';\n};\n\nmodule.exports.limiter = function limiter(concurrency) {\n  var active = 0,\n      queue = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise(function (resolve, reject) {\n      queue.push(function () {\n        fn().then(function (result) {\n          resolve(result);\n          active--;\n          roll();\n        }, function (err) {\n          reject(err);\n          active--;\n          roll();\n        });\n      });\n      roll();\n    });\n  };\n};\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0:\n      return 'pixelated';\n\n    case 1:\n      return 'low';\n\n    case 2:\n      return 'medium';\n  }\n\n  return 'high';\n};\n\nmodule.exports.cib_support = function cib_support(createCanvas) {\n  return Promise.resolve().then(function () {\n    if (typeof createImageBitmap === 'undefined') {\n      return false;\n    }\n\n    var c = createCanvas(100, 100);\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    }).then(function (bitmap) {\n      var status = bitmap.width === 10; // Branch below is filtered on upper level. We do not call resize\n      // detection for basic ImageBitmap.\n      //\n      // https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap\n      // old Crome 51 has ImageBitmap without .close(). Then this code\n      // will throw and return 'false' as expected.\n      //\n\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  })[\"catch\"](function () {\n    return false;\n  });\n};\n\nmodule.exports.worker_offscreen_canvas_support = function worker_offscreen_canvas_support() {\n  return new Promise(function (resolve, reject) {\n    if (typeof OffscreenCanvas === 'undefined') {\n      // if OffscreenCanvas is present, we assume browser supports Worker and built-in Promise as well\n      resolve(false);\n      return;\n    }\n\n    function workerPayload(self) {\n      if (typeof createImageBitmap === 'undefined') {\n        self.postMessage(false);\n        return;\n      }\n\n      Promise.resolve().then(function () {\n        var canvas = new OffscreenCanvas(10, 10); // test that 2d context can be used in worker\n\n        var ctx = canvas.getContext('2d');\n        ctx.rect(0, 0, 1, 1); // test that cib can be used to return image bitmap from worker\n\n        return createImageBitmap(canvas, 0, 0, 1, 1);\n      }).then(function () {\n        return self.postMessage(true);\n      }, function () {\n        return self.postMessage(false);\n      });\n    }\n\n    var code = btoa(\"(\".concat(workerPayload.toString(), \")(self);\"));\n    var w = new Worker(\"data:text/javascript;base64,\".concat(code));\n\n    w.onmessage = function (ev) {\n      return resolve(ev.data);\n    };\n\n    w.onerror = reject;\n  }).then(function (result) {\n    return result;\n  }, function () {\n    return false;\n  });\n}; // Check if canvas.getContext('2d').getImageData can be used,\n// FireFox randomizes the output of that function in `privacy.resistFingerprinting` mode\n\n\nmodule.exports.can_use_canvas = function can_use_canvas(createCanvas) {\n  var usable = false;\n\n  try {\n    var canvas = createCanvas(2, 1);\n    var ctx = canvas.getContext('2d');\n    var d = ctx.createImageData(2, 1);\n    d.data[0] = 12;\n    d.data[1] = 23;\n    d.data[2] = 34;\n    d.data[3] = 255;\n    d.data[4] = 45;\n    d.data[5] = 56;\n    d.data[6] = 67;\n    d.data[7] = 255;\n    ctx.putImageData(d, 0, 0);\n    d = null;\n    d = ctx.getImageData(0, 0, 2, 1);\n\n    if (d.data[0] === 12 && d.data[1] === 23 && d.data[2] === 34 && d.data[3] === 255 && d.data[4] === 45 && d.data[5] === 56 && d.data[6] === 67 && d.data[7] === 255) {\n      usable = true;\n    }\n  } catch (err) {}\n\n  return usable;\n}; // Check if createImageBitmap(img, sx, sy, sw, sh) signature works correctly\n// with JPEG images oriented with Exif;\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n// TODO: remove after it's fixed in chrome for at least 2 releases\n\n\nmodule.exports.cib_can_use_region = function cib_can_use_region() {\n  return new Promise(function (resolve) {\n    // `Image` check required for use in `ServiceWorker`\n    if (typeof Image === 'undefined' || typeof createImageBitmap === 'undefined') {\n      resolve(false);\n      return;\n    }\n\n    var image = new Image();\n    image.src = 'data:image/jpeg;base64,' + '/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAA' + 'AABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9' + 'sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRc' + 'ZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoa' + 'GhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRA' + 'f/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAA' + 'IQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAA' + 'AAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIB' + 'AT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAA' + 'AAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAA' + 'AAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQ' + 'QAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';\n\n    image.onload = function () {\n      createImageBitmap(image, 0, 0, image.width, image.height).then(function (bitmap) {\n        if (bitmap.width === image.width && bitmap.height === image.height) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      }, function () {\n        return resolve(false);\n      });\n    };\n\n    image.onerror = function () {\n      return resolve(false);\n    };\n  });\n};\n\n},{}],17:[function(_dereq_,module,exports){\n// Web Worker wrapper for image resize function\n'use strict';\n\nmodule.exports = function () {\n  var MathLib = _dereq_('./mathlib');\n\n  var mathLib;\n  /* eslint-disable no-undef */\n\n  onmessage = function onmessage(ev) {\n    var tileOpts = ev.data.opts;\n    var returnBitmap = false;\n\n    if (!tileOpts.src && tileOpts.srcBitmap) {\n      var canvas = new OffscreenCanvas(tileOpts.width, tileOpts.height);\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(tileOpts.srcBitmap, 0, 0);\n      tileOpts.src = ctx.getImageData(0, 0, tileOpts.width, tileOpts.height).data;\n      canvas.width = canvas.height = 0;\n      canvas = null;\n      tileOpts.srcBitmap.close();\n      tileOpts.srcBitmap = null; // Temporary force out data to typed array, because Chrome have artefacts\n      // https://github.com/nodeca/pica/issues/223\n      // returnBitmap = true;\n    }\n\n    if (!mathLib) mathLib = new MathLib(ev.data.features); // Use multimath's sync auto-init. Avoid Promise use in old browsers,\n    // because polyfills are not propagated to webworker.\n\n    var data = mathLib.resizeAndUnsharp(tileOpts);\n\n    if (returnBitmap) {\n      var toImageData = new ImageData(new Uint8ClampedArray(data), tileOpts.toWidth, tileOpts.toHeight);\n\n      var _canvas = new OffscreenCanvas(tileOpts.toWidth, tileOpts.toHeight);\n\n      var _ctx = _canvas.getContext('2d');\n\n      _ctx.putImageData(toImageData, 0, 0);\n\n      createImageBitmap(_canvas).then(function (bitmap) {\n        postMessage({\n          bitmap: bitmap\n        }, [bitmap]);\n      });\n    } else {\n      postMessage({\n        data: data\n      }, [data.buffer]);\n    }\n  };\n};\n\n},{\"./mathlib\":1}],18:[function(_dereq_,module,exports){\n// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n},{}],19:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar assign         = _dereq_('object-assign');\nvar base64decode   = _dereq_('./lib/base64decode');\nvar hasWebAssembly = _dereq_('./lib/wa_detect');\n\n\nvar DEFAULT_OPTIONS = {\n  js: true,\n  wasm: true\n};\n\n\nfunction MultiMath(options) {\n  if (!(this instanceof MultiMath)) return new MultiMath(options);\n\n  var opts = assign({}, DEFAULT_OPTIONS, options || {});\n\n  this.options         = opts;\n\n  this.__cache         = {};\n\n  this.__init_promise  = null;\n  this.__modules       = opts.modules || {};\n  this.__memory        = null;\n  this.__wasm          = {};\n\n  this.__isLE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n\n  if (!this.options.js && !this.options.wasm) {\n    throw new Error('mathlib: at least \"js\" or \"wasm\" should be enabled');\n  }\n}\n\n\nMultiMath.prototype.has_wasm = hasWebAssembly;\n\n\nMultiMath.prototype.use = function (module) {\n  this.__modules[module.name] = module;\n\n  // Pin the best possible implementation\n  if (this.options.wasm && this.has_wasm() && module.wasm_fn) {\n    this[module.name] = module.wasm_fn;\n  } else {\n    this[module.name] = module.fn;\n  }\n\n  return this;\n};\n\n\nMultiMath.prototype.init = function () {\n  if (this.__init_promise) return this.__init_promise;\n\n  if (!this.options.js && this.options.wasm && !this.has_wasm()) {\n    return Promise.reject(new Error('mathlib: only \"wasm\" was enabled, but it\\'s not supported'));\n  }\n\n  var self = this;\n\n  this.__init_promise = Promise.all(Object.keys(self.__modules).map(function (name) {\n    var module = self.__modules[name];\n\n    if (!self.options.wasm || !self.has_wasm() || !module.wasm_fn) return null;\n\n    // If already compiled - exit\n    if (self.__wasm[name]) return null;\n\n    // Compile wasm source\n    return WebAssembly.compile(self.__base64decode(module.wasm_src))\n      .then(function (m) { self.__wasm[name] = m; });\n  }))\n    .then(function () { return self; });\n\n  return this.__init_promise;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Methods below are for internal use from plugins\n\n\n// Simple decode base64 to typed array. Useful to load embedded webassembly\n// code. You probably don't need to call this method directly.\n//\nMultiMath.prototype.__base64decode = base64decode;\n\n\n// Increase current memory to include specified number of bytes. Do nothing if\n// size is already ok. You probably don't need to call this method directly,\n// because it will be invoked from `.__instance()`.\n//\nMultiMath.prototype.__reallocate = function mem_grow_to(bytes) {\n  if (!this.__memory) {\n    this.__memory = new WebAssembly.Memory({\n      initial: Math.ceil(bytes / (64 * 1024))\n    });\n    return this.__memory;\n  }\n\n  var mem_size = this.__memory.buffer.byteLength;\n\n  if (mem_size < bytes) {\n    this.__memory.grow(Math.ceil((bytes - mem_size) / (64 * 1024)));\n  }\n\n  return this.__memory;\n};\n\n\n// Returns instantinated webassembly item by name, with specified memory size\n// and environment.\n// - use cache if available\n// - do sync module init, if async init was not called earlier\n// - allocate memory if not enougth\n// - can export functions to webassembly via \"env_extra\",\n//   for example, { exp: Math.exp }\n//\nMultiMath.prototype.__instance = function instance(name, memsize, env_extra) {\n  if (memsize) this.__reallocate(memsize);\n\n  // If .init() was not called, do sync compile\n  if (!this.__wasm[name]) {\n    var module = this.__modules[name];\n    this.__wasm[name] = new WebAssembly.Module(this.__base64decode(module.wasm_src));\n  }\n\n  if (!this.__cache[name]) {\n    var env_base = {\n      memoryBase: 0,\n      memory: this.__memory,\n      tableBase: 0,\n      table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n    };\n\n    this.__cache[name] = new WebAssembly.Instance(this.__wasm[name], {\n      env: assign(env_base, env_extra || {})\n    });\n  }\n\n  return this.__cache[name];\n};\n\n\n// Helper to calculate memory aligh for pointers. Webassembly does not require\n// this, but you may wish to experiment. Default base = 8;\n//\nMultiMath.prototype.__align = function align(number, base) {\n  base = base || 8;\n  var reminder = number % base;\n  return number + (reminder ? base - reminder : 0);\n};\n\n\nmodule.exports = MultiMath;\n\n},{\"./lib/base64decode\":20,\"./lib/wa_detect\":21,\"object-assign\":22}],20:[function(_dereq_,module,exports){\n// base64 decode str -> Uint8Array, to load WA modules\n//\n'use strict';\n\n\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\nmodule.exports = function base64decode(str) {\n  var input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max   = input.length;\n\n  var out = new Uint8Array((max * 3) >> 2);\n\n  // Collect by 6*4 bits (3 bytes)\n\n  var bits = 0;\n  var ptr  = 0;\n\n  for (var idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      out[ptr++] = (bits >> 16) & 0xFF;\n      out[ptr++] = (bits >> 8) & 0xFF;\n      out[ptr++] = bits & 0xFF;\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  var tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    out[ptr++] = (bits >> 16) & 0xFF;\n    out[ptr++] = (bits >> 8) & 0xFF;\n    out[ptr++] = bits & 0xFF;\n  } else if (tailbits === 18) {\n    out[ptr++] = (bits >> 10) & 0xFF;\n    out[ptr++] = (bits >> 2) & 0xFF;\n  } else if (tailbits === 12) {\n    out[ptr++] = (bits >> 4) & 0xFF;\n  }\n\n  return out;\n};\n\n},{}],21:[function(_dereq_,module,exports){\n// Detect WebAssembly support.\n// - Check global WebAssembly object\n// - Try to load simple module (can be disabled via CSP)\n//\n'use strict';\n\n\nvar wa;\n\n\nmodule.exports = function hasWebAssembly() {\n  // use cache if called before;\n  if (typeof wa !== 'undefined') return wa;\n\n  wa = false;\n\n  if (typeof WebAssembly === 'undefined') return wa;\n\n  // If WebAssenbly is disabled, code can throw on compile\n  try {\n    // https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js\n    // Additional check that WA internals are correct\n\n    /* eslint-disable comma-spacing, max-len */\n    var bin      = new Uint8Array([ 0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11 ]);\n    var module   = new WebAssembly.Module(bin);\n    var instance = new WebAssembly.Instance(module, {});\n\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    if (instance.exports.test(4) !== 0) wa = true;\n\n    return wa;\n  } catch (__) {}\n\n  return wa;\n};\n\n},{}],22:[function(_dereq_,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],23:[function(_dereq_,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n},{}],\"/index.js\":[function(_dereq_,module,exports){\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = _dereq_('object-assign');\n\nvar webworkify = _dereq_('webworkify');\n\nvar MathLib = _dereq_('./lib/mathlib');\n\nvar Pool = _dereq_('./lib/pool');\n\nvar utils = _dereq_('./lib/utils');\n\nvar worker = _dereq_('./lib/worker');\n\nvar createStages = _dereq_('./lib/stepper');\n\nvar createRegions = _dereq_('./lib/tiler');\n\nvar filter_info = _dereq_('./lib/mm_resize/resize_filter_info'); // Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\n\n\nvar singletones = {};\nvar NEED_SAFARI_FIX = false;\n\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\nvar concurrency = 1;\n\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\nvar DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency: concurrency,\n  features: ['js', 'wasm', 'ww'],\n  idle: 2000,\n  createCanvas: function createCanvas(width, height) {\n    var tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = width;\n    tmpCanvas.height = height;\n    return tmpCanvas;\n  }\n};\nvar DEFAULT_RESIZE_OPTS = {\n  filter: 'mks2013',\n  unsharpAmount: 0,\n  unsharpRadius: 0.0,\n  unsharpThreshold: 0\n};\nvar CAN_NEW_IMAGE_DATA = false;\nvar CAN_CREATE_IMAGE_BITMAP = false;\nvar CAN_USE_CANVAS_GET_IMAGE_DATA = false;\nvar CAN_USE_OFFSCREEN_CANVAS = false;\nvar CAN_USE_CIB_REGION_FOR_IMAGE = false;\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function destroy() {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        var url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n// API methods\n\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n  this.options = assign({}, DEFAULT_PICA_OPTS, options || {});\n  var limiter_key = \"lk_\".concat(this.options.concurrency); // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit; // List of supported features, according to options & browser/node.js\n\n  this.features = {\n    js: false,\n    // pure JS implementation, can be disabled for testing\n    wasm: false,\n    // webassembly implementation for heavy functions\n    cib: false,\n    // resize via createImageBitmap (only FF at this moment)\n    ww: false // webworkers\n\n  };\n  this.__workersPool = null; // Store requested features for webworkers\n\n  this.__requested_features = [];\n  this.__mathlib = null;\n}\n\nPica.prototype.init = function () {\n  var _this = this;\n\n  if (this.__initPromise) return this.__initPromise; // Test if we can create ImageData without canvas and memory copy\n\n  if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n    try {\n      /* eslint-disable no-new */\n      new ImageData(new Uint8ClampedArray(400), 10, 10);\n      CAN_NEW_IMAGE_DATA = true;\n    } catch (__) {}\n  } // ImageBitmap can be effective in 2 places:\n  //\n  // 1. Threaded jpeg unpack (basic)\n  // 2. Built-in resize (blocked due problem in chrome, see issue #89)\n  //\n  // For basic use we also need ImageBitmap wo support .close() method,\n  // see https://developer.mozilla.org/ru/docs/Web/API/ImageBitmap\n\n\n  if (typeof ImageBitmap !== 'undefined') {\n    if (ImageBitmap.prototype && ImageBitmap.prototype.close) {\n      CAN_CREATE_IMAGE_BITMAP = true;\n    } else {\n      this.debug('ImageBitmap does not support .close(), disabled');\n    }\n  }\n\n  var features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = ['cib', 'wasm', 'js', 'ww'];\n  }\n\n  this.__requested_features = features;\n  this.__mathlib = new MathLib(features); // Check WebWorker support if requested\n\n  if (features.indexOf('ww') >= 0) {\n    if (typeof window !== 'undefined' && 'Worker' in window) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        var wkr = _dereq_('webworkify')(function () {});\n\n        wkr.terminate();\n        this.features.ww = true; // pool uniqueness depends on pool config + webworker config\n\n        var wpool_key = \"wp_\".concat(JSON.stringify(this.options));\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  var initMath = this.__mathlib.init().then(function (mathlib) {\n    // Copy detected features\n    assign(_this.features, mathlib.features);\n  });\n\n  var checkCibResize;\n\n  if (!CAN_CREATE_IMAGE_BITMAP) {\n    checkCibResize = Promise.resolve(false);\n  } else {\n    checkCibResize = utils.cib_support(this.options.createCanvas).then(function (status) {\n      if (_this.features.cib && features.indexOf('cib') < 0) {\n        _this.debug('createImageBitmap() resize supported, but disabled by config');\n\n        return;\n      }\n\n      if (features.indexOf('cib') >= 0) _this.features.cib = status;\n    });\n  }\n\n  CAN_USE_CANVAS_GET_IMAGE_DATA = utils.can_use_canvas(this.options.createCanvas);\n  var checkOffscreenCanvas;\n\n  if (CAN_CREATE_IMAGE_BITMAP && CAN_NEW_IMAGE_DATA && features.indexOf('ww') !== -1) {\n    checkOffscreenCanvas = utils.worker_offscreen_canvas_support();\n  } else {\n    checkOffscreenCanvas = Promise.resolve(false);\n  }\n\n  checkOffscreenCanvas = checkOffscreenCanvas.then(function (result) {\n    CAN_USE_OFFSCREEN_CANVAS = result;\n  }); // we use createImageBitmap to crop image data and pass it to workers,\n  // so need to check whether function works correctly;\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n\n  var checkCibRegion = utils.cib_can_use_region().then(function (result) {\n    CAN_USE_CIB_REGION_FOR_IMAGE = result;\n  }); // Init math lib. That's async because can load some\n\n  this.__initPromise = Promise.all([initMath, checkCibResize, checkOffscreenCanvas, checkCibRegion]).then(function () {\n    return _this;\n  });\n  return this.__initPromise;\n}; // Call resizer in webworker or locally, depending on config\n\n\nPica.prototype.__invokeResize = function (tileOpts, opts) {\n  var _this2 = this;\n\n  // Share cache between calls:\n  //\n  // - wasm instance\n  // - wasm memory object\n  //\n  opts.__mathCache = opts.__mathCache || {};\n  return Promise.resolve().then(function () {\n    if (!_this2.features.ww) {\n      // not possible to have ImageBitmap here if user disabled WW\n      return {\n        data: _this2.__mathlib.resizeAndUnsharp(tileOpts, opts.__mathCache)\n      };\n    }\n\n    return new Promise(function (resolve, reject) {\n      var w = _this2.__workersPool.acquire();\n\n      if (opts.cancelToken) opts.cancelToken[\"catch\"](function (err) {\n        return reject(err);\n      });\n\n      w.value.onmessage = function (ev) {\n        w.release();\n        if (ev.data.err) reject(ev.data.err);else resolve(ev.data);\n      };\n\n      var transfer = [];\n      if (tileOpts.src) transfer.push(tileOpts.src.buffer);\n      if (tileOpts.srcBitmap) transfer.push(tileOpts.srcBitmap);\n      w.value.postMessage({\n        opts: tileOpts,\n        features: _this2.__requested_features,\n        preload: {\n          wasm_nodule: _this2.__mathlib.__\n        }\n      }, transfer);\n    });\n  });\n}; // this function can return promise if createImageBitmap is used\n\n\nPica.prototype.__extractTileData = function (tile, from, opts, stageEnv, extractTo) {\n  if (this.features.ww && CAN_USE_OFFSCREEN_CANVAS && ( // createImageBitmap doesn't work for images (Image, ImageBitmap) with Exif orientation in Chrome,\n  // can use canvas because canvas doesn't have orientation;\n  // see https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n  utils.isCanvas(from) || CAN_USE_CIB_REGION_FOR_IMAGE)) {\n    this.debug('Create tile for OffscreenCanvas');\n    return createImageBitmap(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height).then(function (bitmap) {\n      extractTo.srcBitmap = bitmap;\n      return extractTo;\n    });\n  } // Extract tile RGBA buffer, depending on input type\n\n\n  if (utils.isCanvas(from)) {\n    if (!stageEnv.srcCtx) stageEnv.srcCtx = from.getContext('2d'); // If input is Canvas - extract region data directly\n\n    this.debug('Get tile pixel data');\n    extractTo.src = stageEnv.srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height).data;\n    return extractTo;\n  } // If input is Image or decoded to ImageBitmap,\n  // draw region to temporary canvas and extract data from it\n  //\n  // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n  //\n\n\n  this.debug('Draw tile imageBitmap/image to temporary canvas');\n  var tmpCanvas = this.options.createCanvas(tile.width, tile.height);\n  var tmpCtx = tmpCanvas.getContext('2d');\n  tmpCtx.globalCompositeOperation = 'copy';\n  tmpCtx.drawImage(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height, 0, 0, tile.width, tile.height);\n  this.debug('Get tile pixel data');\n  extractTo.src = tmpCtx.getImageData(0, 0, tile.width, tile.height).data; // Safari 12 workaround\n  // https://github.com/nodeca/pica/issues/199\n\n  tmpCanvas.width = tmpCanvas.height = 0;\n  return extractTo;\n};\n\nPica.prototype.__landTileData = function (tile, result, stageEnv) {\n  var toImageData;\n  this.debug('Convert raw rgba tile result to ImageData');\n\n  if (result.bitmap) {\n    stageEnv.toCtx.drawImage(result.bitmap, tile.toX, tile.toY);\n    return null;\n  }\n\n  if (CAN_NEW_IMAGE_DATA) {\n    // this branch is for modern browsers\n    // If `new ImageData()` & Uint8ClampedArray suported\n    toImageData = new ImageData(new Uint8ClampedArray(result.data), tile.toWidth, tile.toHeight);\n  } else {\n    // fallback for `node-canvas` and old browsers\n    // (IE11 has ImageData but does not support `new ImageData()`)\n    toImageData = stageEnv.toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n    if (toImageData.data.set) {\n      toImageData.data.set(result.data);\n    } else {\n      // IE9 don't have `.set()`\n      for (var i = toImageData.data.length - 1; i >= 0; i--) {\n        toImageData.data[i] = result.data[i];\n      }\n    }\n  }\n\n  this.debug('Draw tile');\n\n  if (NEED_SAFARI_FIX) {\n    // Safari draws thin white stripes between tiles without this fix\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n  } else {\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth, tile.toInnerHeight);\n  }\n\n  return null;\n};\n\nPica.prototype.__tileAndResize = function (from, to, opts) {\n  var _this3 = this;\n\n  var stageEnv = {\n    srcCtx: null,\n    srcImageBitmap: null,\n    isImageBitmapReused: false,\n    toCtx: null\n  };\n\n  var processTile = function processTile(tile) {\n    return _this3.__limit(function () {\n      if (opts.canceled) return opts.cancelToken;\n      var tileOpts = {\n        width: tile.width,\n        height: tile.height,\n        toWidth: tile.toWidth,\n        toHeight: tile.toHeight,\n        scaleX: tile.scaleX,\n        scaleY: tile.scaleY,\n        offsetX: tile.offsetX,\n        offsetY: tile.offsetY,\n        filter: opts.filter,\n        unsharpAmount: opts.unsharpAmount,\n        unsharpRadius: opts.unsharpRadius,\n        unsharpThreshold: opts.unsharpThreshold\n      };\n\n      _this3.debug('Invoke resize math');\n\n      return Promise.resolve(tileOpts).then(function (tileOpts) {\n        return _this3.__extractTileData(tile, from, opts, stageEnv, tileOpts);\n      }).then(function (tileOpts) {\n        _this3.debug('Invoke resize math');\n\n        return _this3.__invokeResize(tileOpts, opts);\n      }).then(function (result) {\n        if (opts.canceled) return opts.cancelToken;\n        stageEnv.srcImageData = null;\n        return _this3.__landTileData(tile, result, stageEnv);\n      });\n    });\n  }; // Need to normalize data source first. It can be canvas or image.\n  // If image - try to decode in background if possible\n\n\n  return Promise.resolve().then(function () {\n    stageEnv.toCtx = to.getContext('2d');\n    if (utils.isCanvas(from)) return null;\n\n    if (utils.isImageBitmap(from)) {\n      stageEnv.srcImageBitmap = from;\n      stageEnv.isImageBitmapReused = true;\n      return null;\n    }\n\n    if (utils.isImage(from)) {\n      // try do decode image in background for faster next operations;\n      // if we're using offscreen canvas, cib is called per tile, so not needed here\n      if (!CAN_CREATE_IMAGE_BITMAP) return null;\n\n      _this3.debug('Decode image via createImageBitmap');\n\n      return createImageBitmap(from).then(function (imageBitmap) {\n        stageEnv.srcImageBitmap = imageBitmap;\n      }) // Suppress error to use fallback, if method fails\n      // https://github.com/nodeca/pica/issues/190\n\n      /* eslint-disable no-unused-vars */\n      [\"catch\"](function (e) {\n        return null;\n      });\n    }\n\n    throw new Error('Pica: \".from\" should be Image, Canvas or ImageBitmap');\n  }).then(function () {\n    if (opts.canceled) return opts.cancelToken;\n\n    _this3.debug('Calculate tiles'); //\n    // Here we are with \"normalized\" source,\n    // follow to tiling\n    //\n\n\n    var regions = createRegions({\n      width: opts.width,\n      height: opts.height,\n      srcTileSize: _this3.options.tile,\n      toWidth: opts.toWidth,\n      toHeight: opts.toHeight,\n      destTileBorder: opts.__destTileBorder\n    });\n    var jobs = regions.map(function (tile) {\n      return processTile(tile);\n    });\n\n    function cleanup(stageEnv) {\n      if (stageEnv.srcImageBitmap) {\n        if (!stageEnv.isImageBitmapReused) stageEnv.srcImageBitmap.close();\n        stageEnv.srcImageBitmap = null;\n      }\n    }\n\n    _this3.debug('Process tiles');\n\n    return Promise.all(jobs).then(function () {\n      _this3.debug('Finished!');\n\n      cleanup(stageEnv);\n      return to;\n    }, function (err) {\n      cleanup(stageEnv);\n      throw err;\n    });\n  });\n};\n\nPica.prototype.__processStages = function (stages, from, to, opts) {\n  var _this4 = this;\n\n  if (opts.canceled) return opts.cancelToken;\n\n  var _stages$shift = stages.shift(),\n      _stages$shift2 = _slicedToArray(_stages$shift, 2),\n      toWidth = _stages$shift2[0],\n      toHeight = _stages$shift2[1];\n\n  var isLastStage = stages.length === 0; // Optimization for legacy filters -\n  // only use user-defined quality for the last stage,\n  // use simpler (Hamming) filter for the first stages where\n  // scale factor is large enough (more than 2-3)\n  //\n  // For advanced filters (mks2013 and custom) - skip optimization,\n  // because need to apply sharpening every time\n\n  var filter;\n  if (isLastStage || filter_info.q2f.indexOf(opts.filter) < 0) filter = opts.filter;else if (opts.filter === 'box') filter = 'box';else filter = 'hamming';\n  opts = assign({}, opts, {\n    toWidth: toWidth,\n    toHeight: toHeight,\n    filter: filter\n  });\n  var tmpCanvas;\n\n  if (!isLastStage) {\n    // create temporary canvas\n    tmpCanvas = this.options.createCanvas(toWidth, toHeight);\n  }\n\n  return this.__tileAndResize(from, isLastStage ? to : tmpCanvas, opts).then(function () {\n    if (isLastStage) return to;\n    opts.width = toWidth;\n    opts.height = toHeight;\n    return _this4.__processStages(stages, tmpCanvas, to, opts);\n  }).then(function (res) {\n    if (tmpCanvas) {\n      // Safari 12 workaround\n      // https://github.com/nodeca/pica/issues/199\n      tmpCanvas.width = tmpCanvas.height = 0;\n    }\n\n    return res;\n  });\n};\n\nPica.prototype.__resizeViaCreateImageBitmap = function (from, to, opts) {\n  var _this5 = this;\n\n  var toCtx = to.getContext('2d');\n  this.debug('Resize via createImageBitmap()');\n  return createImageBitmap(from, {\n    resizeWidth: opts.toWidth,\n    resizeHeight: opts.toHeight,\n    resizeQuality: utils.cib_quality_name(filter_info.f2q[opts.filter])\n  }).then(function (imageBitmap) {\n    if (opts.canceled) return opts.cancelToken; // if no unsharp - draw directly to output canvas\n\n    if (!opts.unsharpAmount) {\n      toCtx.drawImage(imageBitmap, 0, 0);\n      imageBitmap.close();\n      toCtx = null;\n\n      _this5.debug('Finished!');\n\n      return to;\n    }\n\n    _this5.debug('Unsharp result');\n\n    var tmpCanvas = _this5.options.createCanvas(opts.toWidth, opts.toHeight);\n\n    var tmpCtx = tmpCanvas.getContext('2d');\n    tmpCtx.drawImage(imageBitmap, 0, 0);\n    imageBitmap.close();\n    var iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeight);\n\n    _this5.__mathlib.unsharp_mask(iData.data, opts.toWidth, opts.toHeight, opts.unsharpAmount, opts.unsharpRadius, opts.unsharpThreshold);\n\n    toCtx.putImageData(iData, 0, 0); // Safari 12 workaround\n    // https://github.com/nodeca/pica/issues/199\n\n    tmpCanvas.width = tmpCanvas.height = 0;\n    iData = tmpCtx = tmpCanvas = toCtx = null;\n\n    _this5.debug('Finished!');\n\n    return to;\n  });\n};\n\nPica.prototype.resize = function (from, to, options) {\n  var _this6 = this;\n\n  this.debug('Start resize...');\n  var opts = assign({}, DEFAULT_RESIZE_OPTS);\n\n  if (!isNaN(options)) {\n    opts = assign(opts, {\n      quality: options\n    });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth = to.width;\n  opts.toHeight = to.height;\n  opts.width = from.naturalWidth || from.width;\n  opts.height = from.naturalHeight || from.height; // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  } // Prevent stepper from infinite loop\n\n\n  if (to.width === 0 || to.height === 0) {\n    return Promise.reject(new Error(\"Invalid output size: \".concat(to.width, \"x\").concat(to.height)));\n  }\n\n  if (opts.unsharpRadius > 2) opts.unsharpRadius = 2;\n  opts.canceled = false;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    opts.cancelToken = opts.cancelToken.then(function (data) {\n      opts.canceled = true;\n      throw data;\n    }, function (err) {\n      opts.canceled = true;\n      throw err;\n    });\n  }\n\n  var DEST_TILE_BORDER = 3; // Max possible filter window size\n\n  opts.__destTileBorder = Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius | 0));\n  return this.init().then(function () {\n    if (opts.canceled) return opts.cancelToken; // if createImageBitmap supports resize, just do it and return\n\n    if (_this6.features.cib) {\n      if (filter_info.q2f.indexOf(opts.filter) >= 0) {\n        return _this6.__resizeViaCreateImageBitmap(from, to, opts);\n      }\n\n      _this6.debug('cib is enabled, but not supports provided filter, fallback to manual math');\n    }\n\n    if (!CAN_USE_CANVAS_GET_IMAGE_DATA) {\n      var err = new Error('Pica: cannot use getImageData on canvas, ' + \"make sure fingerprinting protection isn't enabled\");\n      err.code = 'ERR_GET_IMAGE_DATA';\n      throw err;\n    } //\n    // No easy way, let's resize manually via arrays\n    //\n\n\n    var stages = createStages(opts.width, opts.height, opts.toWidth, opts.toHeight, _this6.options.tile, opts.__destTileBorder);\n    return _this6.__processStages(stages, from, to, opts);\n  });\n}; // RGBA buffer resize\n//\n\n\nPica.prototype.resizeBuffer = function (options) {\n  var _this7 = this;\n\n  var opts = assign({}, DEFAULT_RESIZE_OPTS, options); // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  }\n\n  return this.init().then(function () {\n    return _this7.__mathlib.resizeAndUnsharp(opts);\n  });\n};\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n  return new Promise(function (resolve) {\n    if (canvas.toBlob) {\n      canvas.toBlob(function (blob) {\n        return resolve(blob);\n      }, mimeType, quality);\n      return;\n    }\n\n    if (canvas.convertToBlob) {\n      resolve(canvas.convertToBlob({\n        type: mimeType,\n        quality: quality\n      }));\n      return;\n    } // Fallback for old browsers\n\n\n    var asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    var len = asString.length;\n    var asBuffer = new Uint8Array(len);\n\n    for (var i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([asBuffer], {\n      type: mimeType\n    }));\n  });\n};\n\nPica.prototype.debug = function () {};\n\nmodule.exports = Pica;\n\n},{\"./lib/mathlib\":1,\"./lib/mm_resize/resize_filter_info\":7,\"./lib/pool\":13,\"./lib/stepper\":14,\"./lib/tiler\":15,\"./lib/utils\":16,\"./lib/worker\":17,\"object-assign\":22,\"webworkify\":23}]},{},[])(\"/index.js\")\n});\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","Cropper","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","n","toString","call","slice","name","test","len","arr2","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","ready","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","Number","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","error","isFunction","toArray","callback","assign","_len","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","undefined","Math","round","REGEXP_SUFFIX","setStyle","element","styles","style","property","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","maxRatio","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","height","width","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","String","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","DataView","orientation","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_length","_offset","setUint16","parseOrientation","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","limited","limitCanvas","oldLeft","oldTop","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","alt","src","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","ratioX","ratioY","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","p","methods","reset","initialImageData","clear","hasSameSize","isImg","replaced","uncreate","load","enable","disable","destroy","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","setAspectRatio","mode","croppable","AnotherCropper","tagName","Error","reloading","sizing","init","toDataURL","clone","read","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","noConflict","setDefaults","utils","require","pica","ImageBlobReduce","initialized","use","plugin","toBlob","blob","opts","env","Promise","resolve","then","_blob_to_image","_calculate_size","_transform","_cleanup","_create_blob","_env","out_canvas","out_blob","toCanvas","before","method_name","fn","old_fn","after","URL","webkitURL","mozURL","msURL","image_url","createObjectURL","reject","scale_factor","transform_width","transform_height","createCanvas","pica_opts","alpha","pick_pica_resize_options","revokeObjectURL","_getUint8Array","buf","fr","FileReader","readAsArrayBuffer","result","message","code","err","to_hex","number","toUpperCase","utf8_encode","unescape","encodeURIComponent","_","utf8_decode","decodeURIComponent","escape","is_uint8array","bin","ExifParser","jpeg_bin","exif_start","exif_end","input","sig","big_endian","each","on_entry","aborted","read_uint32","ifds_to_read","id","shift","scan_ifd","ifds","ifd0","entries","entry","is_subifd_link","format","ifd","ifd1","ifd_no","data_length","ceil","write_uint16","write_uint32","written_offset","ifd_start","ifd_end","sort","a","b","tag","idx","entry_offset","link_offset","data_offset","next_ifd","read_uint16","d","exif_format_length","exif_format_read","v","entry_count","comp_length","comp_offset","j","item","isInteger","is_big_endian","is_jpeg","jpeg_segments_each","on_segment","inside_scan","segment_code","segment_length","byte1","byte2","pos","jpeg_segments_filter","ranges","out_length","segment","new_segment","s","new_range","jpeg_exif_tags_each","on_exif_entry","jpeg_exif_tags_filter","stop_search","new_exif","header","jpeg_add_comment","comment","comment_inserted","segment_count","csegment","c","image_traverse","jpeg_patch_exif","orig_blob","exif_is_big_endian","orientation_offset","orientation_patch","Blob","jpeg_rotate_canvas","ctx","jpeg_attach_orig_segments","all","res","data_out","segments","reducer","to","pick","f","g","r","e","t","u","_dereq_","Multimath","mm_unsharp_mask","mm_resize","MathLib","requested_features","__requested_features","features","js","wasm","has_wasm","create","resizeAndUnsharp","cache","unsharpAmount","unsharp_mask","toWidth","toHeight","unsharpRadius","unsharpThreshold","clampTo8","clampNegative","convolveHor","dest","srcW","srcH","destW","filters","filterPtr","filterShift","filterSize","srcPtr","destX","filterVal","srcOffset","destOffset","convolveVert","convolveHorWithPre","convolveVertWithPre","wasm_fn","wasm_src","createFilters","_require","hasAlpha","ptr","resetAlpha","dst","destH","filtersX","filtersY","tmp","Uint16Array","FILTER_INFO","FIXED_FRAC_BITS","toFixedPoint","num","resizeFilterGen","srcSize","destSize","filterFunction","scaleInverted","scaleClamped","srcWindow","win","destPixel","srcPixel","srcFirst","srcLast","filterElementSize","floatFilter","fxpFilter","total","pxl","floatVal","filterTotal","leftNotEmpty","rightNotEmpty","maxFilterElementSize","packedFilter","Int16Array","packedFilterPtr","slowCopy","Float32Array","hamming","xpi","lanczos2","lanczos3","mks2013","f2q","q2f","asUint8Array","buffer","IS_LE","Uint32Array","__","copyInt16asLE","target_offset","resize_wasm","src_offset","src_size","tmp_offset","__align","tmp_size","filtersX_offset","filtersY_offset","alloc_bytes","__instance","mem","__memory","mem32","src32","convolveHV","_convolveHV","dest32","glur_mono16","hsv_v16","size","out","unsharp","amount","radius","threshold","v1","v2","vmul","diff","iTimes4","brightness","blured","amountFp","thresholdFp","pixels","img_bytes_cnt","hsv_bytes_cnt","blur_bytes_cnt","blur_line_byte_cnt","blur_coeffs_byte_cnt","img_offset","hsv_offset","blur_offset","blur_tmp_offset","blur_line_offset","blur_coeffs_offset","exp","img32","_hsv_v16","blurMono16","_blurMono16","_unsharp","GC_INTERVAL","Pool","idle","available","acquired","lastId","timeoutId","acquire","resource","pop","release","lastUsed","now","gc","_this3","MIN_INNER_TILE_SIZE","createStages","fromWidth","fromHeight","srcTileSize","destTileBorder","minScale","stageCount","log","pow","PIXEL_EPSILON","pixelFloor","nearest","pixelCeil","createRegions","innerTileWidth","innerTileHeight","innerX","innerY","toTileWidth","toTileHeight","tiles","tile","toX","toY","toInnerX","toInnerY","toInnerWidth","toInnerHeight","objClass","isCanvas","cname","isImage","isImageBitmap","limiter","concurrency","active","queue","roll","limit","cib_quality_name","cib_support","createImageBitmap","resizeWidth","resizeHeight","resizeQuality","bitmap","status","close","worker_offscreen_canvas_support","OffscreenCanvas","workerPayload","postMessage","rect","w","Worker","onmessage","ev","can_use_canvas","usable","createImageData","putImageData","cib_can_use_region","Image","mathLib","tileOpts","returnBitmap","srcBitmap","toImageData","ImageData","Uint8ClampedArray","_canvas","_ctx","a0","a1","a2","a3","b1","b2","left_corner","right_corner","gaussCoef","sigma","g1","g2","k","convolveMono16","line","coeff","prev_src","curr_src","curr_out","prev_out","prev_prev_out","src_index","out_index","line_index","coeff_a0","coeff_a1","coeff_b1","coeff_b2","tmp_line","base64decode","hasWebAssembly","DEFAULT_OPTIONS","MultiMath","__cache","__init_promise","__modules","modules","__wasm","__isLE","WebAssembly","compile","__base64decode","m","__reallocate","mem_grow_to","bytes","Memory","initial","mem_size","grow","memsize","env_extra","Module","env_base","memoryBase","memory","tableBase","table","Table","Instance","align","base","reminder","BASE64_MAP","bits","charAt","tailbits","wa","propIsEnumerable","propertyIsEnumerable","toObject","val","shouldUseNative","test1","getOwnPropertyNames","test2","order2","test3","letter","bundleFn","sources","stringify","JSON","wkey","cacheKeys","l","random","wcache","skey","scache","workerSources","resolveSources","depPath","depKey","bare","workerUrl","worker","objectURL","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_i","_arr","_n","_d","_s","_e","next","webworkify","filter_info","singletones","NEED_SAFARI_FIX","hardwareConcurrency","DEFAULT_PICA_OPTS","tmpCanvas","DEFAULT_RESIZE_OPTS","CAN_NEW_IMAGE_DATA","CAN_CREATE_IMAGE_BITMAP","CAN_USE_CANVAS_GET_IMAGE_DATA","CAN_USE_OFFSCREEN_CANVAS","CAN_USE_CIB_REGION_FOR_IMAGE","workerFabric","terminate","Pica","limiter_key","__limit","cib","ww","__workersPool","__mathlib","__initPromise","ImageBitmap","debug","wkr","wpool_key","initMath","mathlib","checkCibResize","checkOffscreenCanvas","checkCibRegion","__invokeResize","__mathCache","cancelToken","transfer","preload","wasm_nodule","__extractTileData","stageEnv","extractTo","srcImageBitmap","srcCtx","tmpCtx","globalCompositeOperation","__landTileData","toCtx","__tileAndResize","isImageBitmapReused","processTile","canceled","srcImageData","imageBitmap","regions","__destTileBorder","jobs","cleanup","__processStages","stages","_this4","_stages$shift","_stages$shift2","isLastStage","__resizeViaCreateImageBitmap","_this5","iData","_this6","quality","DEST_TILE_BORDER","resizeBuffer","_this7","convertToBlob","asString","asBuffer"],"sourceRoot":""}